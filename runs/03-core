#!/usr/bin/env bash

set -euo pipefail

log() {
    echo "[CORE] $1"
}

log "Installing core packages..."

# Core packages
packages=(
    # Basic utilities
    "vlc"
    "brightnessctl"
    "ripgrep"
    "fd"
    "tree"
    "rsync"
    "bleachbit"
    "xorg-xrandr"
    "less"
    "termdown"
    "luarocks"

    # Archival tools
    "atool"
    "p7zip"
    "unrar"
    "unzip"
    "xz"
    "zip"
    "bzip2"
    "gzip"
    "tar"

    # Download utilities
    "curl"
    "wget"
    "aria2"

    # Clipboard for Neovim
    "xclip"

    # Imaging apps
    "imagemagick"
    "nitrogen"
    "redshift"
    "picom"
    "gimp"

    # Notes sync
    "obsidian"
    "syncthing"
)

log "Installing ${#packages[@]} packages..."

if command -v pacman >/dev/null 2>&1; then
    sudo pacman -S --needed --noconfirm "${packages[@]}"
else
    log "ERROR: pacman not found"
    exit 1
fi

log "Core packages installed!"
