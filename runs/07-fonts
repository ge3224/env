#!/usr/bin/env bash

set -euo pipefail

log() {
    echo "[FONTS] $1"
}

DOTFILES_DIR="${DEV_ENV:-$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)}"

log "Installing fonts..."

# Font packages
fonts=(
    "gnu-free-fonts"
    "noto-fonts"
    "ttf-arphic-uming"
    "ttf-baekmuk"
    "ttf-croscore"
    "ttf-dejavu"
    "ttf-freefont"
    "ttf-ibm-plex"
    "ttf-input"
    "ttf-jetbrains-mono-nerd"
    "ttf-liberation"
    "ttf-input-nerd"
    "ttf-roboto"
)

log "Installing ${#fonts[@]} font packages..."
sudo pacman -S --needed --noconfirm "${fonts[@]}"

# Create symlink to font config
log "Creating symlink to fontconfig..."
mkdir -p "$HOME/.config/fontconfig"
ln -sf "$DOTFILES_DIR/dotfiles/fontconfig/fonts.conf" "$HOME/.config/fontconfig/fonts.conf"

# Update font cache
log "Updating font cache..."
fc-cache -fv

log "Fonts installed!"
