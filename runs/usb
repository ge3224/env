#!/usr/bin/env bash

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/_common.sh"

echo "Setting up USB auto-mount utilities..."

packages=(
    "udisks2"
    "udiskie"
    "usbutils"
)

echo "Installing packages: ${packages[*]}"

if command -v pacman >/dev/null 2>&1; then
    install_packages "${packages[@]}"
else
    echo "ERROR: No supported package manager found (pacman)"
    exit 1
fi

echo "USB auto-mount utilities installed successfully!"
echo "To enable automatic USB mounting, add 'exec-once = udiskie --automount --notify --tray' to your Hyprland config."
echo "Or run 'udiskie &' manually to start the auto-mount daemon."